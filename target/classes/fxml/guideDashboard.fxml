<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.tourism.controllers.GuideDashboardController">

   <!-- TOP -->
   <top>
      <VBox style="-fx-background-color: linear-gradient(to right, #FF8C00, #FFD700);">
         <children>
            <HBox alignment="CENTER_LEFT" spacing="15">
               <padding><Insets top="10" right="20" bottom="10" left="20"/></padding>
               <children>
                  <!-- Profile Picture -->
                  <VBox spacing="5" alignment="CENTER">
                     <ImageView fx:id="profileImageView" fitHeight="60" fitWidth="60" preserveRatio="true">
                        <image>
                           <Image url="@/images/pfp.jpeg"/>
                        </image>
                     </ImageView>
                     <Button fx:id="changeProfilePictureButton" text="Change" maxWidth="70"
                             onAction="#handleChangeProfilePicture"/>
                  </VBox>

                  <!-- Welcome -->
                  <Label fx:id="welcomeLabel" text="Welcome Guide!" textFill="WHITE">
                     <font><Font name="System Bold" size="18"/></font>
                  </Label>

                  <Region HBox.hgrow="ALWAYS"/>
                  <Button fx:id="refreshButton" onAction="#handleRefresh" text="âŸ³ Refresh"
                          style="-fx-background-color: white; -fx-text-fill: #FF8C00;"/>
                  <Button fx:id="languageToggleButton" onAction="#toggleLanguage" text="ðŸŒ English"
                          style="-fx-background-color: white; -fx-text-fill: #FF8C00;"/>
                  <Button fx:id="logoutButton" onAction="#handleLogout" text="âŽ‹ Logout"
                          style="-fx-background-color: #FF6347; -fx-text-fill: white;"/>
               </children>
            </HBox>

            <!-- Dashboard Info -->
            <Label fx:id="dashboardInfoLabel" text="ðŸ“Š Dashboard Info" textFill="WHITE">
               <padding><Insets bottom="10" left="20" right="20"/></padding>
            </Label>
         </children>
      </VBox>
   </top>

   <!-- CENTER -->
   <center>
      <TabPane tabClosingPolicy="UNAVAILABLE">
         <tabs>

            <!-- PROFILE TAB -->
            <Tab text="ðŸ‘¤ Profile  Earnings">
               <content>
                  <VBox spacing="20">
                     <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                     <children>

                        <Label text="Guide Profile">
                           <font><Font name="System Bold" size="16"/></font>
                        </Label>

                        <!-- Bio Section -->
                        <VBox spacing="10" style="-fx-background-color: #f4f4f4; -fx-padding: 15; -fx-background-radius: 10;">
                           <Label text="ðŸ“ Bio:" />
                           <TextArea fx:id="bioTextArea" promptText="Tell us something about yourself..."
                                     wrapText="true" prefRowCount="3"/>
                           <HBox spacing="10">
                              <Button fx:id="editBioButton" text="âœï¸ Edit" onAction="#handleEditBio"/>
                              <Button fx:id="saveBioButton" text="ðŸ’¾ Save" onAction="#handleSaveBio" visible="false"/>
                              <Button fx:id="cancelBioButton" text="âœ– Cancel" onAction="#handleCancelBio" visible="false"/>
                              <Button fx:id="deleteBioButton" text="ðŸ—‘ Delete" onAction="#handleDeleteBio" style="-fx-text-fill: red;"/>
                           </HBox>
                        </VBox>

                        <!-- Earning Summary -->
                        <Label text="ðŸ’° Earnings Summary">
                           <font><Font name="System Bold" size="14"/></font>
                        </Label>

                        <HBox spacing="20">
                           <VBox spacing="10" style="-fx-background-color: #FFF8DC; -fx-padding: 15; -fx-background-radius: 10;" prefWidth="200">
                              <Label fx:id="earningsLabel" text="Total: $0.00"/>
                           </VBox>
                           <VBox spacing="10" style="-fx-background-color: #e6ffe6; -fx-padding: 15; -fx-background-radius: 10;" prefWidth="200">
                              <Label fx:id="languagesLabel" text="Languages: "/>
                           </VBox>
                           <VBox spacing="10" style="-fx-background-color: #e0f0ff; -fx-padding: 15; -fx-background-radius: 10;" prefWidth="200">
                              <Label fx:id="experienceLabel" text="Experience: "/>
                           </VBox>
                        </HBox>

                     </children>
                  </VBox>
               </content>
            </Tab>

            <!-- TREKS TAB -->
            <Tab text="â›°ï¸ Upcoming Treks">
               <content>
                  <VBox spacing="15">
                     <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                     <children>
                        <Label text="ðŸ§­ Your Assigned Treks">
                           <font><Font name="System Bold" size="16"/></font>
                        </Label>
                        <TableView fx:id="upcomingTreksTable" prefHeight="300">
                           <columns>
                              <TableColumn fx:id="bookingIdColumn" prefWidth="80" text="Booking ID"/>
                              <TableColumn fx:id="touristColumn" prefWidth="150" text="Tourist"/>
                              <TableColumn fx:id="attractionColumn" prefWidth="200" text="Trek/Attraction"/>
                              <TableColumn fx:id="dateColumn" prefWidth="120" text="Date"/>
                              <TableColumn fx:id="difficultyColumn" prefWidth="100" text="Difficulty"/>
                           </columns>
                        </TableView>
                     </children>
                  </VBox>
               </content>
            </Tab>

            <!-- UPDATES TAB -->
            <Tab text="âš ï¸ Important Updates">
               <content>
                  <VBox spacing="15">
                     <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                     <children>
                        <Label text="ðŸŒ¦ï¸ Weather Alerts  Safety Updates">
                           <font><Font name="System Bold" size="16"/></font>
                        </Label>
                        <TextArea fx:id="updatesTextArea" wrapText="true" prefHeight="400"
                                  style="-fx-background-color: #FFFACD;"/>
                     </children>
                  </VBox>
               </content>
            </Tab>


         </tabs>
      </TabPane>
   </center>
</BorderPane>